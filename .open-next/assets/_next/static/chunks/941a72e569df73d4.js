(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return i},searchParamsToUrlQuery:function(){return s},urlQueryToSearchParams:function(){return l}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});function s(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function l(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,o(e));else t.set(r,o(n));return t}function i(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return l},formatWithValidation:function(){return c},urlObjectKeys:function(){return i}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let s=e.r(90809)._(e.r(98183)),o=/https?|ftp|gopher|file/;function l(e){let{auth:t,hostname:r}=e,n=e.protocol||"",a=e.pathname||"",l=e.hash||"",i=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),i&&"object"==typeof i&&(i=String(s.urlQueryToSearchParams(i)));let u=e.search||i&&`?${i}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||o.test(n))&&!1!==c?(c="//"+(c||""),a&&"/"!==a[0]&&(a="/"+a)):c||(c=""),l&&"#"!==l[0]&&(l="#"+l),u&&"?"!==u[0]&&(u="?"+u),a=a.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${n}${c}${a}${u}${l}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return l(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=e.r(71645);function a(e,t){let r=(0,n.useRef)(null),a=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=s(e,n)),t&&(a.current=s(t,n))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return y},NormalizeError:function(){return b},PageNotFoundError:function(){return w},SP:function(){return h},ST:function(){return x},WEB_VITALS:function(){return s},execOnce:function(){return o},getDisplayName:function(){return d},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return i},isResSent:function(){return f},loadGetInitialProps:function(){return m},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return v}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let s=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let l=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>l.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function m(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await m(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&f(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="u">typeof performance,x=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class b extends Error{}class w extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class y extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function v(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return s}});let n=e.r(18967),a=e.r(52817);function s(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return g},useLinkStatus:function(){return w}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let s=e.r(90809),o=e.r(43476),l=s._(e.r(71645)),i=e.r(95057),c=e.r(8372),u=e.r(18581),d=e.r(18967),f=e.r(5550);e.r(33525);let p=e.r(91949),m=e.r(73668),h=e.r(9396);function x(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function g(t){var r;let n,a,s,[i,g]=(0,l.useOptimistic)(p.IDLE_LINK_STATUS),w=(0,l.useRef)(null),{href:y,as:j,children:v,prefetch:N=null,passHref:k,replace:S,shallow:P,scroll:_,onClick:C,onMouseEnter:O,onTouchStart:T,legacyBehavior:E=!1,onNavigate:R,ref:M,unstable_dynamicOnHover:$,...A}=t;n=v,E&&("string"==typeof n||"number"==typeof n)&&(n=(0,o.jsx)("a",{children:n}));let L=l.default.useContext(c.AppRouterContext),I=!1!==N,U=!1!==N?null===(r=N)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:D,as:F}=l.default.useMemo(()=>{let e=x(y);return{href:e,as:j?x(j):e}},[y,j]);if(E){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=l.default.Children.only(n)}let B=E?a&&"object"==typeof a&&a.ref:M,W=l.default.useCallback(e=>(null!==L&&(w.current=(0,p.mountLinkInstance)(e,D,L,U,I,g)),()=>{w.current&&((0,p.unmountLinkForCurrentNavigation)(w.current),w.current=null),(0,p.unmountPrefetchableInstance)(e)}),[I,D,L,U,g]),z={ref:(0,u.useMergedRef)(W,B),onClick(t){E||"function"!=typeof C||C(t),E&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!L||t.defaultPrevented||function(t,r,n,a,s,o,i){if("u">typeof window){let c,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,m.isLocalURL)(r)){s&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(99781);l.default.startTransition(()=>{d(n||r,s?"replace":"push",o??!0,a.current)})}}(t,D,F,w,S,_,R)},onMouseEnter(e){E||"function"!=typeof O||O(e),E&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),L&&I&&(0,p.onNavigationIntent)(e.currentTarget,!0===$)},onTouchStart:function(e){E||"function"!=typeof T||T(e),E&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),L&&I&&(0,p.onNavigationIntent)(e.currentTarget,!0===$)}};return(0,d.isAbsoluteUrl)(F)?z.href=F:E&&!k&&("a"!==a.type||"href"in a.props)||(z.href=(0,f.addBasePath)(F)),s=E?l.default.cloneElement(a,z):(0,o.jsx)("a",{...A,...z,children:n}),(0,o.jsx)(b.Provider,{value:i,children:s})}e.r(84508);let b=(0,l.createContext)(p.IDLE_LINK_STATUS),w=()=>(0,l.useContext)(b);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},58244,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let n=["What was the highlight of your week so far?","What's something that made you laugh recently?","What are you looking forward to this week?","What's been on your mind lately?","Describe your week in three words, then explain why.","What's something new you tried or learned?","If your week was a movie, what genre would it be?","What's the best thing you ate this week?"];function a(){return n[Math.floor(Math.random()*n.length)]}function s(){return(0,t.jsxs)("svg",{viewBox:"0 0 80 80",className:"mx-auto mb-4 w-24 opacity-60",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[(0,t.jsx)("ellipse",{cx:"40",cy:"58",rx:"34",ry:"10",fill:"#f5e6d0",stroke:"#d4b896",strokeWidth:"1.5"}),(0,t.jsx)("ellipse",{cx:"40",cy:"56",rx:"30",ry:"8",fill:"white",stroke:"#e8c47a",strokeWidth:"2",strokeDasharray:"4 3"}),(0,t.jsx)("rect",{x:"26",y:"48",width:"6",height:"6",rx:"1",fill:"#e8c47a",opacity:"0.4",transform:"rotate(15 29 51)"}),(0,t.jsx)("rect",{x:"44",y:"50",width:"4",height:"4",rx:"1",fill:"#e8c47a",opacity:"0.3",transform:"rotate(-10 46 52)"}),(0,t.jsx)("rect",{x:"35",y:"46",width:"5",height:"5",rx:"1",fill:"#e8c47a",opacity:"0.35"}),(0,t.jsx)("path",{d:"M34 40 C34 37 36 37 36 34",stroke:"#c8913a",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.2"}),(0,t.jsx)("path",{d:"M44 40 C44 37 46 37 46 34",stroke:"#c8913a",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.15"})]})}function o({pairId:e,currentUserId:o}){let[l,i]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[d,f]=(0,r.useState)(0),[p,m]=(0,r.useState)(!1),[h,x]=(0,r.useState)(null),[g,b]=(0,r.useState)(0),[w,y]=(0,r.useState)(0),[j,v]=(0,r.useState)(null),[N,k]=(0,r.useState)(n[0]),[S,P]=(0,r.useState)(null),[_,C]=(0,r.useState)(""),[O,T]=(0,r.useState)(""),[E,R]=(0,r.useState)(null),[M,$]=(0,r.useState)("");(0,r.useEffect)(()=>{k(a())},[]);let A=(0,r.useRef)(null),L=(0,r.useRef)([]),I=(0,r.useRef)(null),U=(0,r.useRef)(null),D=(0,r.useRef)(""),F=(0,r.useRef)([]),B=(0,r.useRef)(0),W=(0,r.useRef)(0),z=(0,r.useRef)(null),K=(0,r.useRef)(null),J=(0,r.useCallback)(async()=>{let t=await fetch(`/api/waffles/${e}`);t.ok&&i(await t.json())},[e]);async function V(){P(null);try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);L.current=[],t.ondataavailable=e=>{e.data.size>0&&L.current.push(e.data)},A.current=t,t.start(),u(!0),f(0),I.current=setInterval(()=>{f(e=>e+1)},1e3),D.current="",F.current=[],T("");let r=performance.now();B.current=r,W.current=r;let n=window.SpeechRecognition||window.webkitSpeechRecognition;if(n)try{let e=new n;e.continuous=!0,e.interimResults=!0,e.lang="en-US";let t=!1,r="";e.onresult=e=>{let t=performance.now();r="";for(let n=e.resultIndex;n<e.results.length;n++){let a=e.results[n][0].transcript;if(e.results[n].isFinal){D.current+=a;let e=a.trim().split(/\s+/).filter(Boolean);if(e.length>0){let r=(W.current-B.current)/1e3,n=((t-B.current)/1e3-r)/e.length;for(let t=0;t<e.length;t++)F.current.push({word:e[t],start:r+t*n,end:r+(t+1)*n})}W.current=t}else r+=a}T(D.current+r)},e.onerror=e=>{"no-speech"!==e.error&&(t=!0)},e.onend=()=>{if(!t&&A.current?.state==="recording")try{e.start()}catch{}},e.start(),z.current=e}catch{}}catch(t){let e=t instanceof DOMException?t.name:"";"NotAllowedError"===e?P("Microphone access was denied. Open browser settings to allow microphone access, then try again."):"NotFoundError"===e?P("No microphone found. Please connect a microphone and try again."):P("Could not access your microphone. Please check your browser settings and try again.")}}async function X(){z.current&&(z.current.onend=null,z.current.stop(),z.current=null);let e=D.current.trim(),t=[...F.current];A.current&&"inactive"!==A.current.state&&(A.current.onstop=()=>{A.current.stream.getTracks().forEach(e=>e.stop()),R({blob:new Blob(L.current,{type:"audio/webm"}),duration:d,transcript:e,wordTimestamps:t}),$("")},A.current.stop()),u(!1),I.current&&clearInterval(I.current)}async function Q(){if(!E)return;m(!0);let{blob:t,duration:r,transcript:n,wordTimestamps:s}=E,o=new FormData;o.append("pairId",e),o.append("audio",t,"waffle.webm"),o.append("duration",String(r)),o.append("transcript",n),s.length>0&&o.append("word_timestamps",JSON.stringify(s)),M.trim()&&o.append("title",M.trim()),await fetch("/api/waffles",{method:"POST",body:o}),R(null),$(""),m(!1),f(0),T(""),k(a()),J()}function Z(){U.current&&(U.current.pause(),U.current.ontimeupdate=null,U.current.onloadedmetadata=null,U.current=null),x(null),b(0),y(0)}function q(e){if(U.current&&(U.current.pause(),U.current.ontimeupdate=null,U.current.onloadedmetadata=null,U.current=null),h===e)return void Z();let t=new Audio(`/api/waffles/audio/${e}`);t.onended=()=>Z(),t.onerror=()=>Z(),t.ontimeupdate=()=>b(t.currentTime),t.onloadedmetadata=()=>y(t.duration),t.play().catch(()=>Z()),U.current=t,x(e),b(0)}function H(e){U.current&&(U.current.currentTime=e,b(e))}async function Y(e){_.trim()&&(await fetch(`/api/waffles/comments/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:_.trim(),timestampSeconds:h===e?g:0})}),C(""),J())}async function G(e,t){await fetch("/api/waffles",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({waffleId:e,title:t})}),J()}function ee(e){let t=Math.floor(e),r=Math.floor(t/60);return`${r}:${(t%60).toString().padStart(2,"0")}`}return(0,r.useEffect)(()=>{J()},[J]),(0,r.useEffect)(()=>{K.current&&(K.current.scrollTop=K.current.scrollHeight)},[l]),(0,t.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col",children:[(0,t.jsxs)("div",{ref:K,className:"flex-1 space-y-3 overflow-y-auto pb-4",children:[0===l.length&&!c&&(0,t.jsxs)("div",{className:"card-cottage bg-waffle-texture p-7 text-center",children:[(0,t.jsx)(s,{}),(0,t.jsx)("p",{className:"font-display mb-2 text-lg font-semibold text-syrup",children:"Your waffle plate is empty!"}),(0,t.jsx)("p",{className:"text-sm leading-relaxed text-waffle-dark/80",children:"Record your first waffle below. Just talk about your week, what's on your mind, or anything at all. There's no wrong way to waffle."})]}),l.map(e=>{let r=e.sender_id===o,n=j===e.id,a=h===e.id,s=e.word_timestamps?(()=>{try{return JSON.parse(e.word_timestamps)}catch{return[]}})():[],l=a&&w>0?g/w:0;return(0,t.jsxs)("div",{className:`flex flex-col ${r?"items-end":"items-start"}`,children:[(0,t.jsxs)("div",{onClick:()=>{n?v(null):(v(e.id),C(""))},className:`max-w-[320px] cursor-pointer px-4 py-3 transition-all ${r?"bubble-mine":"bubble-theirs"} ${n?"ring-2 ring-waffle-light ring-offset-2":""}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-lg",children:a?"⏸":"▶"}),(0,t.jsx)("span",{className:"font-display text-sm font-semibold",children:ee(e.duration_seconds)}),e.comments.length>0&&(0,t.jsxs)("span",{className:"rounded-full bg-waffle-light/30 px-1.5 py-0.5 text-[10px] font-semibold text-waffle-dark/70",children:[e.comments.length," comment",1!==e.comments.length?"s":""]})]}),e.title&&(0,t.jsx)("p",{className:"mt-1 text-xs font-medium leading-snug opacity-80",children:e.title}),(0,t.jsxs)("p",{className:"mt-1 text-xs opacity-60",children:[e.sender_name," · ",new Date(e.created_at+"Z").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]})]}),n&&(0,t.jsxs)("div",{className:`mt-2 w-full max-w-[340px] rounded-xl border-2 border-dashed p-4 ${r?"border-waffle-light/50 bg-butter":"border-waffle-light/30 bg-cream"}`,children:[(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),q(e.id)},className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-waffle text-white",children:(0,t.jsx)("span",{className:"text-sm",children:a?"⏸":"▶"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"relative h-2 cursor-pointer rounded-full bg-waffle-light/30",onClick:e=>{var t;e.stopPropagation();let r=e.currentTarget.getBoundingClientRect();t=(e.clientX-r.left)/r.width,U.current&&w>0&&(U.current.currentTime=t*w,b(U.current.currentTime))},children:[(0,t.jsx)("div",{className:"h-full rounded-full bg-waffle transition-[width] duration-100",style:{width:`${100*l}%`}}),e.comments.map(r=>{let n=e.duration_seconds>0?r.timestamp_seconds/e.duration_seconds*100:0;return(0,t.jsx)("span",{className:"absolute top-1/2 h-2.5 w-0.5 -translate-y-1/2 rounded-full bg-syrup/50",style:{left:`${Math.min(n,100)}%`}},r.id)})]}),(0,t.jsxs)("div",{className:"mt-0.5 flex justify-between text-[10px] text-waffle-dark/50",children:[(0,t.jsx)("span",{children:a?ee(g):"0:00"}),(0,t.jsx)("span",{children:ee(a&&w?w:e.duration_seconds)})]})]})]})}),r?(0,t.jsx)("textarea",{defaultValue:e.title,onBlur:t=>{t.target.value!==e.title&&G(e.id,t.target.value)},placeholder:"Add a description or notes...",className:"mb-3 w-full resize-none rounded-lg border border-waffle-light/40 bg-white/50 px-2 py-1.5 text-xs leading-relaxed text-waffle-dark outline-none placeholder:text-waffle-dark/30 focus:border-waffle",rows:2,onClick:e=>e.stopPropagation()}):e.title?(0,t.jsx)("p",{className:"mb-3 text-xs leading-relaxed text-waffle-dark/80",children:e.title}):null,e.transcript&&(0,t.jsx)("div",{className:"mb-3 rounded-lg bg-white/40 p-2 text-xs leading-relaxed text-waffle-dark/80",children:s.length>0?(0,t.jsx)("span",{children:s.map((r,n)=>{let o=a&&g>=r.start&&g<r.end;return(0,t.jsxs)("span",{onClick:t=>{t.stopPropagation(),a||q(e.id),a?H(r.start):setTimeout(()=>H(r.start),300)},className:`cursor-pointer transition-colors ${o?"rounded bg-waffle/20 font-semibold text-syrup":"hover:text-waffle"}`,children:[r.word,n<s.length-1?" ":""]},n)})}):e.transcript}),e.comments.length>0&&(0,t.jsxs)("div",{className:"mb-3 space-y-1.5",children:[(0,t.jsx)("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-waffle-dark/40",children:"Comments"}),e.comments.map(r=>(0,t.jsxs)("div",{onClick:t=>{t.stopPropagation(),a||q(e.id),a?H(r.timestamp_seconds):setTimeout(()=>H(r.timestamp_seconds),300)},className:"flex cursor-pointer gap-2 rounded-lg bg-white/30 px-2 py-1.5 text-xs hover:bg-white/50",children:[(0,t.jsx)("span",{className:"shrink-0 font-mono text-[10px] text-waffle/60",children:ee(r.timestamp_seconds)}),(0,t.jsxs)("span",{className:"text-waffle-dark/80",children:[(0,t.jsxs)("span",{className:"font-semibold",children:[r.user_name,":"]})," ",r.text]})]},r.id))]}),(0,t.jsxs)("div",{className:"flex gap-1.5",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("input",{type:"text",value:_,onChange:e=>C(e.target.value),onKeyDown:t=>"Enter"===t.key&&Y(e.id),placeholder:a?`Comment at ${ee(g)}...`:"Add a comment...",className:"flex-1 rounded-lg border border-waffle-light/40 bg-white/50 px-2 py-1.5 text-xs text-waffle-dark outline-none placeholder:text-waffle-dark/30 focus:border-waffle"}),(0,t.jsx)("button",{onClick:()=>Y(e.id),disabled:!_.trim(),className:"rounded-lg bg-waffle px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-30",children:"Send"})]})]})]},e.id)})]}),(0,t.jsx)("div",{className:"sticky bottom-0 mt-auto flex flex-col items-center border-t-2 border-dashed border-waffle-light/40 bg-cream pb-6 pt-5 safe-b",children:p?(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"inline-block h-5 w-5 animate-spin rounded-full border-2 border-waffle border-t-transparent"}),(0,t.jsx)("p",{className:"font-display font-medium text-waffle-dark",children:"Sending your waffle..."})]}):E?(0,t.jsxs)("div",{className:"w-full space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"font-display text-sm font-semibold text-syrup",children:["Your waffle (",ee(E.duration),")"]}),(0,t.jsx)("button",{onClick:function(){R(null),$(""),f(0),T("")},className:"text-xs font-bold text-waffle-dark/40 hover:text-red-600",children:"Discard"})]}),E.transcript&&(0,t.jsx)("div",{className:"rounded-lg bg-white/60 p-2 text-xs leading-relaxed text-waffle-dark/70",children:E.transcript}),(0,t.jsx)("textarea",{value:M,onChange:e=>$(e.target.value),placeholder:"Add a description or notes about this waffle... (optional)",className:"w-full resize-none rounded-xl border-2 border-waffle-light/40 bg-white/50 px-3 py-2 text-sm leading-relaxed text-waffle-dark outline-none placeholder:text-waffle-dark/30 focus:border-waffle",rows:3,autoFocus:!0}),(0,t.jsx)("button",{onClick:Q,className:"btn-retro w-full py-3 text-sm",children:"Send waffle"})]}):c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mb-3 font-mono text-2xl font-bold text-red-600 tabular-nums",children:ee(d)}),O&&(0,t.jsxs)("div",{className:"mb-3 w-full rounded-lg bg-white/60 px-3 py-2 text-xs leading-relaxed text-waffle-dark/70",children:[(0,t.jsx)("p",{className:"mb-0.5 text-[10px] font-semibold uppercase tracking-wider text-waffle/50",children:"Live transcript"}),O]}),(0,t.jsx)("button",{onClick:X,className:"btn-record btn-record-active","aria-label":"Stop recording",children:(0,t.jsx)("span",{className:"relative z-10 block h-7 w-7 rounded bg-white"})}),(0,t.jsx)("p",{className:"mt-3 text-sm font-medium text-waffle-dark/60",children:"Tap to stop"})]}):(0,t.jsxs)(t.Fragment,{children:[S&&(0,t.jsxs)("div",{className:"mb-4 w-full rounded-xl border-2 border-red-200 bg-red-50 p-4 text-left",children:[(0,t.jsx)("p",{className:"font-display text-sm font-semibold text-red-800",children:"Microphone unavailable"}),(0,t.jsx)("p",{className:"mt-1 text-sm leading-relaxed text-red-600",children:S}),(0,t.jsx)("button",{onClick:()=>P(null),className:"mt-2 text-xs font-bold text-red-400 hover:text-red-600",children:"Dismiss"})]}),(0,t.jsxs)("div",{className:"prompt-card mb-5 w-full p-4 text-center",children:[(0,t.jsx)("p",{className:"font-display text-xs font-semibold uppercase tracking-widest text-waffle/80",children:"Not sure what to say?"}),(0,t.jsx)("p",{className:"mt-1.5 text-sm font-medium leading-relaxed text-syrup",children:N}),(0,t.jsx)("button",{onClick:()=>k(a()),className:"mt-2 text-xs font-bold text-waffle hover:text-syrup",children:"Another prompt →"})]}),(0,t.jsx)("button",{onClick:V,className:"btn-record","aria-label":"Start recording",children:(0,t.jsx)("span",{className:"relative z-10 block h-5 w-5 rounded-full bg-white shadow-sm"})}),(0,t.jsx)("p",{className:"mt-3 text-sm font-medium text-waffle-dark/60",children:"Tap to record a waffle"})]})})]})}e.s(["PairView",()=>o])}]);
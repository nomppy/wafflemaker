(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},94542,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566);function i(){return(0,t.jsxs)("svg",{viewBox:"0 0 64 64",className:"mx-auto mb-5 w-20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[(0,t.jsx)("rect",{x:"8",y:"12",width:"48",height:"40",rx:"8",fill:"#e8c47a",stroke:"#a0722c",strokeWidth:"2.5"}),(0,t.jsx)("line",{x1:"24",y1:"12",x2:"24",y2:"52",stroke:"#c8913a",strokeWidth:"1.5",opacity:"0.4"}),(0,t.jsx)("line",{x1:"40",y1:"12",x2:"40",y2:"52",stroke:"#c8913a",strokeWidth:"1.5",opacity:"0.4"}),(0,t.jsx)("line",{x1:"8",y1:"25",x2:"56",y2:"25",stroke:"#c8913a",strokeWidth:"1.5",opacity:"0.4"}),(0,t.jsx)("line",{x1:"8",y1:"38",x2:"56",y2:"38",stroke:"#c8913a",strokeWidth:"1.5",opacity:"0.4"}),(0,t.jsx)("path",{d:"M32 40l-1-0.9C27 35.5 25 33.5 25 31.2c0-1.8 1.4-3.2 3.2-3.2 1 0 2 .5 2.8 1.3.8-.8 1.8-1.3 2.8-1.3 1.8 0 3.2 1.4 3.2 3.2 0 2.3-2 4.3-6 8L32 40z",fill:"#be185d",opacity:"0.6"}),(0,t.jsx)("path",{d:"M22 8 C22 5 25 5 25 2",stroke:"#c8913a",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.25",className:"steam-wisp"}),(0,t.jsx)("path",{d:"M32 8 C32 5 35 5 35 2",stroke:"#c8913a",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.2",className:"steam-wisp-delayed"}),(0,t.jsx)("path",{d:"M42 8 C42 5 45 5 45 2",stroke:"#c8913a",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.2",className:"steam-wisp-slow"})]})}function r(){let[e,r]=(0,a.useState)(""),[l,n]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[d,x]=(0,a.useState)(!1),m=(0,s.useSearchParams)(),h=m.get("error"),p=m.get("redirect")||"/dashboard";async function u(t){t.preventDefault(),x(!0);let a=await fetch("/api/auth/send-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,redirect:p})}),s=await a.json();s.ok&&(n(!0),s.magicUrl&&c(s.magicUrl)),x(!1)}return l?(0,t.jsxs)("div",{className:"card-cottage bg-waffle-texture p-8 text-center",children:[(0,t.jsx)("h2",{className:"font-display mb-2 text-2xl font-bold text-syrup",children:"Check your email"}),(0,t.jsxs)("p",{className:"leading-relaxed text-waffle-dark",children:["We sent a login link to ",(0,t.jsx)("strong",{className:"text-syrup",children:e})]}),(0,t.jsx)("p",{className:"mt-2 text-sm text-waffle-dark/60",children:"It'll arrive in a jiffy — check your inbox!"}),o&&(0,t.jsx)("a",{href:o,className:"btn-retro mt-6 inline-block px-8 py-3",children:"Dev: Click to login"})]}):(0,t.jsxs)("div",{className:"card-cottage w-full max-w-sm bg-waffle-texture p-8",children:[(0,t.jsx)(i,{}),(0,t.jsx)("h2",{className:"font-display mb-6 text-center text-2xl font-bold text-syrup",children:"Sign in to Wafflemaker"}),h&&(0,t.jsx)("div",{className:"mb-4 rounded-xl border-2 border-red-200 bg-red-50 p-3 text-sm text-red-700",children:"invalid_token"===h?"That link has expired or is invalid. Please try again.":"Something went wrong. Please try again."}),(0,t.jsxs)("form",{onSubmit:u,children:[(0,t.jsx)("label",{className:"font-display mb-1.5 block text-sm font-semibold text-waffle-dark",children:"Your email"}),(0,t.jsx)("input",{type:"email",placeholder:"your@email.com",value:e,onChange:e=>r(e.target.value),required:!0,className:"input-cottage mb-4 w-full"}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"btn-retro w-full py-3.5 text-base disabled:opacity-50",children:d?"Sending...":"Send magic link"})]}),(0,t.jsx)("p",{className:"mt-4 text-center text-xs text-waffle-dark/50",children:"No password needed — we'll email you a link"})]})}function l(){return(0,t.jsx)("main",{className:"flex min-h-screen items-center justify-center p-6",children:(0,t.jsx)(a.Suspense,{children:(0,t.jsx)(r,{})})})}e.s(["default",()=>l])}]);